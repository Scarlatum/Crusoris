var t=this&&this.t||function(t,s,i,h){return new(i||(i=Promise))((function(o,e){function r(t){try{a(h.next(t))}catch(t){e(t)}}function n(t){try{a(h.i(t))}catch(t){e(t)}}function a(t){var s;t.done?o(t.value):(s=t.value,s instanceof i?s:new i((function(t){t(s)}))).then(r,n)}a((h=h.apply(t,s||[])).next())}))};export default class s{constructor(t){this.h={o:0,u:0,l:0,m:0,p:0,opacity:0},this.v={hash:0,status:!0,timeout:1e3},this.$={translate:"",scale:""},this.C={translate:"",scale:""};const s=document.createElement("i");s.id="crusoris-circle",s.style.setProperty("opacity",String(this.h.opacity));const i=document.createElement("i");i.id="crusoris-dot";const h=document.createElement("div");h.id="crusoris",this.F=h,this.M=s,this.S=i,this.T=t}set g(t){this.k(),this.S.style.setProperty("transform",Object.keys(this.C).reduce(((t,s)=>`${this.C[t]} ${this.C[s]}`)))}set H(t){this.k(),this.M.style.setProperty("transform",Object.keys(this.$).reduce(((t,s)=>`${this.$[t]} ${this.$[s]}`)))}set j(t){this.v.status=t,this.M.style.setProperty("opacity",String(Number(!t)))}init(){this.T.prepend(this.F),this.F.prepend(this.M),this.F.prepend(this.S),this.D()}D(){const{width:t,borderWidth:s,transitionDuration:i}=window.getComputedStyle(this.M);this.h.o=1e3*parseFloat(i),this.h.m=parseFloat(s),this.h.p=parseFloat(t),this.h.u=parseFloat(t)/2;const h=window.getComputedStyle(this.S);this.h.l=parseFloat(h.width)/2,this.start()}start(){window.addEventListener("mousemove",(({clientY:t,clientX:s})=>{this.O(s,t)})),window.addEventListener("mousedown",(()=>this.P(!0))),window.addEventListener("mouseup",(()=>this.P(!1))),window.addEventListener("click",(()=>this.B())),setInterval((()=>t(this,void 0,void 0,(function*(){this.j=this.v.hash===(yield this.I()),console.log(this.v.status)}))),this.v.timeout/2)}O(t,s){const i=Math.random();this.$.translate=`translate(${t-this.h.u}px, ${s-this.h.u}px)`,this.C.translate=`translate(${t-this.h.l}px, ${s-this.h.l}px)`,this.H=i,this.g=i}B(){this.$.scale="scale(0)",this.H=Math.random(),setTimeout((()=>{this.$.scale="scale(1)",this.H=Math.random()}),this.h.o)}P(t){this.$.scale=`scale(${t?2:1})`,this.H=Math.random()}I(){return t(this,void 0,void 0,(function*(){return new Promise((t=>{setTimeout((()=>{t(this.v.hash)}),this.v.timeout/2)}))}))}k(){this.j=!1,this.v.hash=Math.random()}}