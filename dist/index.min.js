export default class t{constructor(t){this.t={i:0,o:0,h:0,u:0,l:0,opacity:0},this.m={hash:0,status:!0,timeout:3e3},this.p={translate:"",scale:"",v:"var(--crusoris-tail-transform, rotate(45deg))"},this.F={translate:"",scale:"",v:"var(--crusoris-dot-transform, rotate(0deg))"};const s=document.createElement("i");s.id="crusoris-tail",s.style.setProperty("opacity",String(this.t.opacity));const i=document.createElement("i");i.id="crusoris-dot";const o=document.createElement("div");o.id="crusoris",this.$=o,this.g=s,this.C=i,this.S=t}set M(t){this.T();const s=this.k(this.F);requestAnimationFrame((()=>{this.C.style.setProperty("transform",s)}))}set H(t){this.T();const s=this.k(this.p);requestAnimationFrame((()=>{this.g.style.setProperty("transform",s)}))}set q(t){this.m.status=t,this.g.style.setProperty("opacity",String(Number(!t)))}init(){this.S.prepend(this.$),this.$.prepend(this.g),this.$.prepend(this.C),this.A()}A(){const{width:t,borderWidth:s,transitionDuration:i}=window.getComputedStyle(this.g);this.t.i=1e3*parseFloat(i),this.t.u=parseFloat(s),this.t.l=parseFloat(t),this.t.o=parseFloat(t)/2;const o=window.getComputedStyle(this.C);this.t.h=parseFloat(o.width)/2,this.start()}start(){window.addEventListener("mousemove",(({clientY:t,clientX:s})=>{this.D(s,t)})),window.addEventListener("mouseout",(()=>this.N(!0))),window.addEventListener("mouseover",(()=>this.N(!1))),window.addEventListener("mousedown",(()=>this.j(!0))),window.addEventListener("mouseup",(()=>this.j(!1))),window.addEventListener("click",(()=>this.B())),window.addEventListener("mousemove",(()=>this.N(!1)),{once:!0}),setInterval((async()=>{this.q=this.m.hash===await this.I()}),this.m.timeout/2)}D(t,s){const i=Math.random();this.p.translate=`translate(${t-this.t.o}px, ${s-this.t.o}px)`,this.F.translate=`translate(${t-this.t.h}px, ${s-this.t.h}px)`,this.H=i,this.M=i}B(){this.p.scale="scale(0)",this.H=Math.random(),setTimeout((()=>{this.p.scale="scale(1)",this.H=Math.random()}),this.t.i)}j(t){this.p.scale=`scale(${t?2:1})`,this.H=Math.random()}N(t){this.$.style.setProperty("opacity",String(Number(!t)))}async I(){return new Promise((t=>{setTimeout((()=>{t(this.m.hash)}),this.m.timeout/2)}))}T(){this.q=!1,this.m.hash=Math.random()}k(t){return Object.values(t).reduce(((t,s)=>`${t} ${s}`))}}